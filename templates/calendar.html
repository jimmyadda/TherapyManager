<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, Initial-scale=1">
        <link rel="stylesheet" href="/static/vendor/fullcalendar/calendar.js.min.css">
        <script src="/static/vendor/fullcalendar/calendar.js"></script>
    </head>

    <body>      
        <div class="pageheader">
            <div class="titlebar">
              <a class=""  href="/appointment">תצוגת טבלה</a>
            </div>
        </div>

        <div class="items">
          {% for appointment in appointments %}
                  <div id="app_title" class="itempreviewheader">{{ appointment['pat_first_name'] }} {{ appointment['pat_last_name'] }}</div>
                  <div class="itempreviewtime">{{ appointment['appointment_date'] }}</div>
                  <div class="itempreviewtime">{{ appointment['appointment_date'] }}</div>
          {% endfor %}
      </div>

        <form method="POST" action="/calendar" enctype="multipart/form-data">
            <div id="calendar"></div>   
        </form>
</body>
<script>
  var calendarInstance1 = new calendarJs( "calendar", {
    manualEditingEnabled: true,
    startOfWeekDay: 6, // 6 = Sunday
    reverseOrderDaysOfWeek: true
    // All your options can be set here
  } );

  //calendarInstance1.addEvent( event1 );
   const events_data = JSON.parse('{{ appointments | tojson }}');
 // const events_data = '{{ appointments}}'
 events_data.forEach(function(object) {
  console.log(object); 
  object['title'] = "פגישת טיפול עם : " + object.pat_first_name + " "+ object.pat_last_name
  object['from'] = object.appointment_date
  object['to'] = object.appointment_date
  });

  calendarInstance1.addEvents(events_data);

</script>

</html>